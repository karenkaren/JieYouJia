//
//  UIButton+Custom.m
//  LingTouNiaoZF
//
//  Created by LiuFeifei on 16/11/25.
//  Copyright © 2016年 LiuJie. All rights reserved.
//

#import "UIButton+Custom.h"

@implementation UIButton (Custom)

#pragma mark - 带背景色的button
+ (UIButton *)createBigBGButtonWithTitle:(NSString *)title actionBolck:(ButtonBlockAction)actionBolck
{
    UIButton * button = [UIButton createBGButtonWithTitle:title actionBolck:actionBolck];
    [button mas_makeConstraints:^(MASConstraintMaker *make) {
        make.width.equalTo(@(kScreenWidth));
        make.height.equalTo(@(kAdaptiveBaseIphone6(45)));
    }];
    return button;
}

+ (UIButton *)createMiddleBGButtonWithTitle:(NSString *)title actionBolck:(ButtonBlockAction)actionBolck
{
    UIButton * button = [UIButton createBGButtonWithTitle:title actionBolck:actionBolck];
    button.layer.cornerRadius = 2.5;
    button.layer.masksToBounds = YES;
    [button mas_makeConstraints:^(MASConstraintMaker *make) {
        make.width.equalTo(@(kAdaptiveBaseIphone6(341)));
        make.height.equalTo(@(kAdaptiveBaseIphone6(45)));
    }];
    return button;
}

+ (UIButton *)createSmallBGButtonWithTitle:(NSString *)title actionBolck:(ButtonBlockAction)actionBolck
{
    UIButton * button = [UIButton createBGButtonWithTitle:title actionBolck:actionBolck];
    button.layer.cornerRadius = 2.5;
    button.layer.masksToBounds = YES;
    [button mas_makeConstraints:^(MASConstraintMaker *make) {
        make.width.equalTo(@(kAdaptiveBaseIphone6(200)));
        make.height.equalTo(@(kAdaptiveBaseIphone6(45)));
    }];
    return button;
}

+ (instancetype)createBGButtonWithTitle:(NSString *)title actionBolck:(ButtonBlockAction)actionBolck
{
    UIButton * button = [UIButton createButtonWithTitle:title color:[UIColor whiteColor] font:kFont18 block:actionBolck];
    [button setDisenableBackgroundColor:kHexColor(0xffdcc4)  enableBackgroundColor:kBrightColorFF6600];
    [button setBackgroundImage:[UIImage imageWithColor:kBrightColorFF6600] forState:UIControlStateSelected];
//    [button addObserver:button forKeyPath:@"enabled" options:NSKeyValueObservingOptionNew context:nil];
    return button;
}

#pragma mark - 描边button
+ (instancetype)createBigBorderButtonWithTitle:(NSString *)title actionBolck:(ButtonBlockAction)actionBolck
{
    UIButton * button = [UIButton createBorderButtonWithTitle:title actionBolck:actionBolck];
    [button mas_makeConstraints:^(MASConstraintMaker *make) {
        make.width.equalTo(@(kScreenWidth));
        make.height.equalTo(@(kAdaptiveBaseIphone6(45)));
    }];
    return button;
}

+ (instancetype)createMiddleBorderButtonWithTitle:(NSString *)title actionBolck:(ButtonBlockAction)actionBolck
{
    UIButton * button = [UIButton createBorderButtonWithTitle:title actionBolck:actionBolck];
    button.layer.cornerRadius = 2.5;
    button.layer.masksToBounds = YES;
    [button mas_makeConstraints:^(MASConstraintMaker *make) {
        make.width.equalTo(@(kAdaptiveBaseIphone6(341)));
        make.height.equalTo(@(kAdaptiveBaseIphone6(45)));
    }];
    return button;
}

+ (instancetype)createSmallBorderButtonWithTitle:(NSString *)title actionBolck:(ButtonBlockAction)actionBolck
{
    UIButton * button = [UIButton createBorderButtonWithTitle:title actionBolck:actionBolck];
    button.layer.cornerRadius = 2.5;
    button.layer.masksToBounds = YES;
    [button mas_makeConstraints:^(MASConstraintMaker *make) {
        make.width.equalTo(@(kAdaptiveBaseIphone6(200)));
        make.height.equalTo(@(kAdaptiveBaseIphone6(45)));
    }];
    return button;
}

+ (instancetype)createBorderButtonWithTitle:(NSString *)title actionBolck:(ButtonBlockAction)actionBolck
{
    UIButton * button = [UIButton createButtonWithTitle:title color:kBrightColorFF6600 font:kFont18 block:actionBolck];
    button.layer.borderColor = kBrightColorFF6600.CGColor;
    button.layer.borderWidth = 1.0 / kScreenScale;
    [button setBackgroundImage:[UIImage imageWithColor:kBrightColorFF6600] forState:UIControlStateSelected];
    [button setTitleColor:[UIColor whiteColor] forState:UIControlStateSelected];
    [button setTitleColor:kHexColor(0xffdcc4) forState:UIControlStateDisabled];
//    [button addObserver:button forKeyPath:@"enabled" options:NSKeyValueObservingOptionNew context:nil];
    return button;
}

//- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary<NSKeyValueChangeKey,id> *)change context:(void *)context
//{
//    if ([keyPath isEqualToString:@"enabled"]) {
//        DLog(@"%@", keyPath);
//        if ([object isKindOfClass:[UIButton class]]) {
//            UIButton * button = (UIButton *)object;
//            button.layer.borderColor = button.enabled ? kBrightColorFF6600.CGColor : kHexColor(0xffdcc4).CGColor;
//        }
//    }
//}
//
//- (void)dealloc
//{
//    [self removeObserver:self forKeyPath:@"enabled"];
//}

- (void)setEnabled:(BOOL)enabled
{
    [super setEnabled:enabled];
    if (self.layer.borderWidth) {
        self.layer.borderColor = enabled ? kBrightColorFF6600.CGColor : kHexColor(0xffdcc4).CGColor;
    }
}

@end
